!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).idleTimeout=t()}(this,function(){"use strict";var e=function(){return(e=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},t=function(){function t(t,i){var o=this;this.timeoutHandle=null,this.isIdle=!1,this.startTime=0,this.remainingTime=0,this.lastPageX=-1,this.lastPageY=-1,this.eventNames=["DOMMouseScroll","mousedown","mousemove","mousewheel","MSPointerDown","MSPointerMove","keydown","touchmove","touchstart","wheel"],this.handleEvent=function(e){if(!(o.remainingTime>0)){if("mousemove"===e.type){var t=e,i=t.pageX,n=t.pageY;if(void 0===i&&void 0===n||i===o.lastPageX&&n===o.lastPageY)return;o.lastPageX=i,o.lastPageY=n}o.resetTimeout()}},this.callback=t,this.options=e({element:document.body,loop:!1,timeout:3e5},i);var n=this.options.element;this.eventNames.forEach(function(e){n.addEventListener(e,o.handleEvent)}),this.resetTimeout()}return t.prototype.pause=function(){var e=this.startTime+this.options.timeout-(new Date).getTime();e<=0||(this.remainingTime=e,this.timeoutHandle&&(window.clearTimeout(this.timeoutHandle),this.timeoutHandle=null))},t.prototype.resume=function(){this.remainingTime<=0||(this.resetTimeout(),this.remainingTime=0)},t.prototype.reset=function(){this.isIdle=!1,this.remainingTime=0,this.resetTimeout()},t.prototype.destroy=function(){var e=this,t=this.options.element;this.eventNames.forEach(function(i){t.removeEventListener(i,e.handleEvent)}),this.timeoutHandle&&window.clearTimeout(this.timeoutHandle)},t.prototype.resetTimeout=function(){var e=this;this.timeoutHandle&&(window.clearTimeout(this.timeoutHandle),this.timeoutHandle=null),this.isIdle&&!this.options.loop||(this.timeoutHandle=window.setTimeout(function(){e.handleTimeout()},this.remainingTime||this.options.timeout),this.startTime=(new Date).getTime())},t.prototype.handleTimeout=function(){this.isIdle=!0,this.resetTimeout(),this.callback()},Object.defineProperty(t.prototype,"idle",{get:function(){return this.isIdle},set:function(e){e?this.handleTimeout():this.reset()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loop",{set:function(e){this.options.loop=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeout",{set:function(e){this.options.timeout=e},enumerable:!0,configurable:!0}),t}();return function(e,i){return new t(e,i)}});